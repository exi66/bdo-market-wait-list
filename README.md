# bdo-market-wait-list

## Описание

Бот для мониторинга очереди аукциона и купонов в игре Black Desert Online.  
Сurrently develops only for russian-language region.

## Запуск

По сути это три отдельных приложения в одном репозитории, по этому запуск выглядит слишком сложно.

Для запуска необходимо:

1. создат в `/bot/src/config.js` со структорой, аналогичной `/bot/src/config.js.example` и заполнить все поля
2. создат в `/service/public/.env` со структорой, аналогичной `/service/public/.env.example` и заполнить все поля
3. установить все зависимости. В `/bot/` это только `npm i`, в `/service/` это `npm i && cd public && composer install && composer update`.
4. установить `mariadb` или сменить поставщиков в файлах `/bot/src/config.js` и `/service/public/bootstrap.php` на другую базу данных. Предусмотрена работа только с реляционными
5. выполнить миграцию бд путем последовательного вызова файлов в каталоге `/service/public/database`
6. заполнить корректно путь до api в файле `/service/src/js/Api.js` и до приложения в целом в файле `/service/src/main.js`, скомпилировать веб приложение из `/service/` и разместить на веб хосте
7. организовать роутинг в `/service/public/app` на файл `index.php`
8. запустить бота

По итогу у вас должно быть что-то такое:

- репа с ботом `/bot` где-то за задворках машины
- результат компиляции веб-сервиса из папки `/service/dist` который смотрит в сеть
- реляционная бд

## Используемые ресурсы

Все купоны берутся с [Orbit-games](https://orbit-games.com/).

## Установка на сервере

Все манипуляции осуществляются в личных сообщениях с ботом. Чтобы это, в принципе, было возможно, необходимо иметь с ботом как минимум один общий сервер, на котором должны стоять настройки приватности, позволяющие писать Вам в личные сообщения.

### Настройка

Все команды реализованы в slash commands, максимально просто и подробно расписаны. Ниже продублирован весь функционал:

- `/queue` - возвращает текущую очередь аукциона (бот проверяет ее по умолчанию каждые 5 минут)
- `/coupons` - возврает доступные купоны в случае;
- `/settings` - управляет настройками приложения посредством веб-службы;
